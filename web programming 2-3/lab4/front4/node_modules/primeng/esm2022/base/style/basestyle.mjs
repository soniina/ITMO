import { inject, Injectable } from '@angular/core';
import { dt, Theme } from '@primeuix/styled';
import { minifyCSS, resolve } from '@primeuix/utils';
import { UseStyle } from 'primeng/usestyle';
import * as i0 from "@angular/core";
const theme = ({ dt }) => `
*,
::before,
::after {
    box-sizing: border-box;
}

/* Non ng overlay animations */
.p-connected-overlay {
    opacity: 0;
    transform: scaleY(0.8);
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-visible {
    opacity: 1;
    transform: scaleY(1);
}

.p-connected-overlay-hidden {
    opacity: 0;
    transform: scaleY(1);
    transition: opacity 0.1s linear;
}

/* NG based overlay animations */
.p-connected-overlay-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-connected-overlay-leave-to {
    opacity: 0;
}

.p-connected-overlay-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-leave-active {
    transition: opacity 0.1s linear;
}

/* Toggleable Content */
.p-toggleable-content-enter-from,
.p-toggleable-content-leave-to {
    max-height: 0;
}

.p-toggleable-content-enter-to,
.p-toggleable-content-leave-from {
    max-height: 1000px;
}

.p-toggleable-content-leave-active {
    overflow: hidden;
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
}

.p-toggleable-content-enter-active {
    overflow: hidden;
    transition: max-height 1s ease-in-out;
}

.p-disabled,
.p-disabled * {
    cursor: default;
    pointer-events: none;
    user-select: none;
}

.p-disabled,
.p-component:disabled {
    opacity: ${dt('disabled.opacity')};
}

.pi {
    font-size: ${dt('icon.size')};
}

.p-icon {
    width: ${dt('icon.size')};
    height: ${dt('icon.size')};
}

.p-overlay-mask {
    background: ${dt('mask.background')};
    color: ${dt('mask.color')};
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-overlay-mask-enter {
    animation: p-overlay-mask-enter-animation ${dt('mask.transition.duration')} forwards;
}

.p-overlay-mask-leave {
    animation: p-overlay-mask-leave-animation ${dt('mask.transition.duration')} forwards;
}
/* Temporarily disabled, distrupts PrimeNG overlay animations */
/* @keyframes p-overlay-mask-enter-animation {
    from {
        background: transparent;
    }
    to {
        background: ${dt('mask.background')};
    }
}
@keyframes p-overlay-mask-leave-animation {
    from {
        background: ${dt('mask.background')};
    }
    to {
        background: transparent;
    }
}*/

.p-iconwrapper {
    display: inline-flex;
    justify-content: center;
    align-items: center;
}
`;
const css = ({ dt }) => `
.p-hidden-accessible {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}

.p-hidden-accessible input,
.p-hidden-accessible select {
    transform: scale(0);
}

.p-overflow-hidden {
    overflow: hidden;
    padding-right: ${dt('scrollbar.width')};
}

/* @todo move to baseiconstyle.ts */

.p-icon {
    display: inline-block;
    vertical-align: baseline;
}

.p-icon-spin {
    -webkit-animation: p-icon-spin 2s infinite linear;
    animation: p-icon-spin 2s infinite linear;
}

@-webkit-keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}

@keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}
`;
export class BaseStyle {
    name = 'base';
    useStyle = inject(UseStyle);
    theme = theme;
    css = css;
    classes = {};
    inlineStyles = {};
    load = (style, options = {}, transform = (cs) => cs) => {
        const computedStyle = transform(resolve(style, { dt }));
        return computedStyle ? this.useStyle.use(minifyCSS(computedStyle), { name: this.name, ...options }) : {};
    };
    loadCSS = (options = {}) => {
        return this.load(this.css, options);
    };
    loadTheme = (options = {}, style = '') => {
        return this.load(this.theme, options, (computedStyle = '') => Theme.transformCSS(options.name || this.name, `${computedStyle}${style}`));
    };
    getCommonTheme = (params) => {
        return Theme.getCommon(this.name, params);
    };
    getComponentTheme = (params) => {
        return Theme.getComponent(this.name, params);
    };
    getDirectiveTheme = (params) => {
        return Theme.getDirective(this.name, params);
    };
    getPresetTheme = (preset, selector, params) => {
        return Theme.getCustomPreset(this.name, preset, selector, params);
    };
    getLayerOrderThemeCSS = () => {
        return Theme.getLayerOrderCSS(this.name);
    };
    getStyleSheet = (extendedCSS = '', props = {}) => {
        if (this.css) {
            const _css = resolve(this.css, { dt });
            const _style = minifyCSS(`${_css}${extendedCSS}`);
            const _props = Object.entries(props)
                .reduce((acc, [k, v]) => acc.push(`${k}="${v}"`) && acc, [])
                .join(' ');
            return `<style type="text/css" data-primeng-style-id="${this.name}" ${_props}>${_style}</style>`;
        }
        return '';
    };
    getCommonThemeStyleSheet = (params, props = {}) => {
        return Theme.getCommonStyleSheet(this.name, params, props);
    };
    getThemeStyleSheet = (params, props = {}) => {
        let css = [Theme.getStyleSheet(this.name, params, props)];
        if (this.theme) {
            const name = this.name === 'base' ? 'global-style' : `${this.name}-style`;
            const _css = resolve(this.theme, { dt });
            const _style = minifyCSS(Theme.transformCSS(name, _css));
            const _props = Object.entries(props)
                .reduce((acc, [k, v]) => acc.push(`${k}="${v}"`) && acc, [])
                .join(' ');
            css.push(`<style type="text/css" data-primeng-style-id="${name}" ${_props}>${_style}</style>`);
        }
        return css.join('');
    };
    static ɵfac = function BaseStyle_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || BaseStyle)(); };
    static ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: BaseStyle, factory: BaseStyle.ɵfac, providedIn: 'root' });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(BaseStyle, [{
        type: Injectable,
        args: [{ providedIn: 'root' }]
    }], null, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZXN0eWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2Jhc2Uvc3R5bGUvYmFzZXN0eWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25ELE9BQU8sRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDN0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7O0FBRTVDLE1BQU0sS0FBSyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztlQTJFWCxFQUFFLENBQUMsa0JBQWtCLENBQUM7Ozs7aUJBSXBCLEVBQUUsQ0FBQyxXQUFXLENBQUM7Ozs7YUFJbkIsRUFBRSxDQUFDLFdBQVcsQ0FBQztjQUNkLEVBQUUsQ0FBQyxXQUFXLENBQUM7Ozs7a0JBSVgsRUFBRSxDQUFDLGlCQUFpQixDQUFDO2FBQzFCLEVBQUUsQ0FBQyxZQUFZLENBQUM7Ozs7Ozs7OztnREFTbUIsRUFBRSxDQUFDLDBCQUEwQixDQUFDOzs7O2dEQUk5QixFQUFFLENBQUMsMEJBQTBCLENBQUM7Ozs7Ozs7O3NCQVF4RCxFQUFFLENBQUMsaUJBQWlCLENBQUM7Ozs7O3NCQUtyQixFQUFFLENBQUMsaUJBQWlCLENBQUM7Ozs7Ozs7Ozs7OztDQVkxQyxDQUFDO0FBRUYsTUFBTSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztxQkFtQkgsRUFBRSxDQUFDLGlCQUFpQixDQUFDOzs7Ozs7Ozs7Ozs7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O1lBQ3pDLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3pELE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO2lCQUMvQixNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEVBQUUsRUFBRSxDQUFDO2lCQUMzRCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFZixHQUFHLENBQUMsSUFBSSxDQUFDLGlEQUFpRCxJQUFJLEtBQUssTUFBTSxJQUFJLE1BQU0sVUFBVSxDQUFDLENBQUM7UUFDbkcsQ0FBQztRQUVELE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN4QixDQUFDLENBQUM7bUdBL0VPLFNBQVM7Z0VBQVQsU0FBUyxXQUFULFNBQVMsbUJBREksTUFBTTs7aUZBQ25CLFNBQVM7Y0FEckIsVUFBVTtlQUFDLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgZHQsIFRoZW1lIH0gZnJvbSAnQHByaW1ldWl4L3N0eWxlZCc7XG5pbXBvcnQgeyBtaW5pZnlDU1MsIHJlc29sdmUgfSBmcm9tICdAcHJpbWV1aXgvdXRpbHMnO1xuaW1wb3J0IHsgVXNlU3R5bGUgfSBmcm9tICdwcmltZW5nL3VzZXN0eWxlJztcblxuY29uc3QgdGhlbWUgPSAoeyBkdCB9KSA9PiBgXG4qLFxuOjpiZWZvcmUsXG46OmFmdGVyIHtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4vKiBOb24gbmcgb3ZlcmxheSBhbmltYXRpb25zICovXG4ucC1jb25uZWN0ZWQtb3ZlcmxheSB7XG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2Zvcm06IHNjYWxlWSgwLjgpO1xuICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjEycyBjdWJpYy1iZXppZXIoMCwgMCwgMC4yLCAxKSxcbiAgICAgICAgb3BhY2l0eSAwLjEycyBjdWJpYy1iZXppZXIoMCwgMCwgMC4yLCAxKTtcbn1cblxuLnAtY29ubmVjdGVkLW92ZXJsYXktdmlzaWJsZSB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB0cmFuc2Zvcm06IHNjYWxlWSgxKTtcbn1cblxuLnAtY29ubmVjdGVkLW92ZXJsYXktaGlkZGVuIHtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zZm9ybTogc2NhbGVZKDEpO1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4xcyBsaW5lYXI7XG59XG5cbi8qIE5HIGJhc2VkIG92ZXJsYXkgYW5pbWF0aW9ucyAqL1xuLnAtY29ubmVjdGVkLW92ZXJsYXktZW50ZXItZnJvbSB7XG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2Zvcm06IHNjYWxlWSgwLjgpO1xufVxuXG4ucC1jb25uZWN0ZWQtb3ZlcmxheS1sZWF2ZS10byB7XG4gICAgb3BhY2l0eTogMDtcbn1cblxuLnAtY29ubmVjdGVkLW92ZXJsYXktZW50ZXItYWN0aXZlIHtcbiAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4xMnMgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMiwgMSksXG4gICAgICAgIG9wYWNpdHkgMC4xMnMgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMiwgMSk7XG59XG5cbi5wLWNvbm5lY3RlZC1vdmVybGF5LWxlYXZlLWFjdGl2ZSB7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjFzIGxpbmVhcjtcbn1cblxuLyogVG9nZ2xlYWJsZSBDb250ZW50ICovXG4ucC10b2dnbGVhYmxlLWNvbnRlbnQtZW50ZXItZnJvbSxcbi5wLXRvZ2dsZWFibGUtY29udGVudC1sZWF2ZS10byB7XG4gICAgbWF4LWhlaWdodDogMDtcbn1cblxuLnAtdG9nZ2xlYWJsZS1jb250ZW50LWVudGVyLXRvLFxuLnAtdG9nZ2xlYWJsZS1jb250ZW50LWxlYXZlLWZyb20ge1xuICAgIG1heC1oZWlnaHQ6IDEwMDBweDtcbn1cblxuLnAtdG9nZ2xlYWJsZS1jb250ZW50LWxlYXZlLWFjdGl2ZSB7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0cmFuc2l0aW9uOiBtYXgtaGVpZ2h0IDAuNDVzIGN1YmljLWJlemllcigwLCAxLCAwLCAxKTtcbn1cblxuLnAtdG9nZ2xlYWJsZS1jb250ZW50LWVudGVyLWFjdGl2ZSB7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0cmFuc2l0aW9uOiBtYXgtaGVpZ2h0IDFzIGVhc2UtaW4tb3V0O1xufVxuXG4ucC1kaXNhYmxlZCxcbi5wLWRpc2FibGVkICoge1xuICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuLnAtZGlzYWJsZWQsXG4ucC1jb21wb25lbnQ6ZGlzYWJsZWQge1xuICAgIG9wYWNpdHk6ICR7ZHQoJ2Rpc2FibGVkLm9wYWNpdHknKX07XG59XG5cbi5waSB7XG4gICAgZm9udC1zaXplOiAke2R0KCdpY29uLnNpemUnKX07XG59XG5cbi5wLWljb24ge1xuICAgIHdpZHRoOiAke2R0KCdpY29uLnNpemUnKX07XG4gICAgaGVpZ2h0OiAke2R0KCdpY29uLnNpemUnKX07XG59XG5cbi5wLW92ZXJsYXktbWFzayB7XG4gICAgYmFja2dyb3VuZDogJHtkdCgnbWFzay5iYWNrZ3JvdW5kJyl9O1xuICAgIGNvbG9yOiAke2R0KCdtYXNrLmNvbG9yJyl9O1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5wLW92ZXJsYXktbWFzay1lbnRlciB7XG4gICAgYW5pbWF0aW9uOiBwLW92ZXJsYXktbWFzay1lbnRlci1hbmltYXRpb24gJHtkdCgnbWFzay50cmFuc2l0aW9uLmR1cmF0aW9uJyl9IGZvcndhcmRzO1xufVxuXG4ucC1vdmVybGF5LW1hc2stbGVhdmUge1xuICAgIGFuaW1hdGlvbjogcC1vdmVybGF5LW1hc2stbGVhdmUtYW5pbWF0aW9uICR7ZHQoJ21hc2sudHJhbnNpdGlvbi5kdXJhdGlvbicpfSBmb3J3YXJkcztcbn1cbi8qIFRlbXBvcmFyaWx5IGRpc2FibGVkLCBkaXN0cnVwdHMgUHJpbWVORyBvdmVybGF5IGFuaW1hdGlvbnMgKi9cbi8qIEBrZXlmcmFtZXMgcC1vdmVybGF5LW1hc2stZW50ZXItYW5pbWF0aW9uIHtcbiAgICBmcm9tIHtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgfVxuICAgIHRvIHtcbiAgICAgICAgYmFja2dyb3VuZDogJHtkdCgnbWFzay5iYWNrZ3JvdW5kJyl9O1xuICAgIH1cbn1cbkBrZXlmcmFtZXMgcC1vdmVybGF5LW1hc2stbGVhdmUtYW5pbWF0aW9uIHtcbiAgICBmcm9tIHtcbiAgICAgICAgYmFja2dyb3VuZDogJHtkdCgnbWFzay5iYWNrZ3JvdW5kJyl9O1xuICAgIH1cbiAgICB0byB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIH1cbn0qL1xuXG4ucC1pY29ud3JhcHBlciB7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbn1cbmA7XG5cbmNvbnN0IGNzcyA9ICh7IGR0IH0pID0+IGBcbi5wLWhpZGRlbi1hY2Nlc3NpYmxlIHtcbiAgICBib3JkZXI6IDA7XG4gICAgY2xpcDogcmVjdCgwIDAgMCAwKTtcbiAgICBoZWlnaHQ6IDFweDtcbiAgICBtYXJnaW46IC0xcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBwYWRkaW5nOiAwO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMXB4O1xufVxuXG4ucC1oaWRkZW4tYWNjZXNzaWJsZSBpbnB1dCxcbi5wLWhpZGRlbi1hY2Nlc3NpYmxlIHNlbGVjdCB7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgwKTtcbn1cblxuLnAtb3ZlcmZsb3ctaGlkZGVuIHtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHBhZGRpbmctcmlnaHQ6ICR7ZHQoJ3Njcm9sbGJhci53aWR0aCcpfTtcbn1cblxuLyogQHRvZG8gbW92ZSB0byBiYXNlaWNvbnN0eWxlLnRzICovXG5cbi5wLWljb24ge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XG59XG5cbi5wLWljb24tc3BpbiB7XG4gICAgLXdlYmtpdC1hbmltYXRpb246IHAtaWNvbi1zcGluIDJzIGluZmluaXRlIGxpbmVhcjtcbiAgICBhbmltYXRpb246IHAtaWNvbi1zcGluIDJzIGluZmluaXRlIGxpbmVhcjtcbn1cblxuQC13ZWJraXQta2V5ZnJhbWVzIHAtaWNvbi1zcGluIHtcbiAgICAwJSB7XG4gICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xuICAgIH1cbiAgICAxMDAlIHtcbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNTlkZWcpO1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNTlkZWcpO1xuICAgIH1cbn1cblxuQGtleWZyYW1lcyBwLWljb24tc3BpbiB7XG4gICAgMCUge1xuICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMzU5ZGVnKTtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzU5ZGVnKTtcbiAgICB9XG59XG5gO1xuXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KVxuZXhwb3J0IGNsYXNzIEJhc2VTdHlsZSB7XG4gICAgbmFtZSA9ICdiYXNlJztcblxuICAgIHVzZVN0eWxlOiBVc2VTdHlsZSA9IGluamVjdChVc2VTdHlsZSk7XG5cbiAgICB0aGVtZSA9IHRoZW1lO1xuXG4gICAgY3NzID0gY3NzO1xuXG4gICAgY2xhc3NlcyA9IHt9O1xuXG4gICAgaW5saW5lU3R5bGVzID0ge307XG5cbiAgICBsb2FkID0gKHN0eWxlLCBvcHRpb25zID0ge30sIHRyYW5zZm9ybSA9IChjcykgPT4gY3MpID0+IHtcbiAgICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHRyYW5zZm9ybShyZXNvbHZlKHN0eWxlLCB7IGR0IH0pKTtcbiAgICAgICAgcmV0dXJuIGNvbXB1dGVkU3R5bGUgPyB0aGlzLnVzZVN0eWxlLnVzZShtaW5pZnlDU1MoY29tcHV0ZWRTdHlsZSksIHsgbmFtZTogdGhpcy5uYW1lLCAuLi5vcHRpb25zIH0pIDoge307XG4gICAgfTtcblxuICAgIGxvYWRDU1MgPSAob3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWQodGhpcy5jc3MsIG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBsb2FkVGhlbWUgPSAob3B0aW9uczogYW55ID0ge30sIHN0eWxlOiBzdHJpbmcgPSAnJykgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkKHRoaXMudGhlbWUsIG9wdGlvbnMsIChjb21wdXRlZFN0eWxlID0gJycpID0+IFRoZW1lLnRyYW5zZm9ybUNTUyhvcHRpb25zLm5hbWUgfHwgdGhpcy5uYW1lLCBgJHtjb21wdXRlZFN0eWxlfSR7c3R5bGV9YCkpO1xuICAgIH07XG5cbiAgICBnZXRDb21tb25UaGVtZSA9IChwYXJhbXM/KSA9PiB7XG4gICAgICAgIHJldHVybiBUaGVtZS5nZXRDb21tb24odGhpcy5uYW1lLCBwYXJhbXMpO1xuICAgIH07XG5cbiAgICBnZXRDb21wb25lbnRUaGVtZSA9IChwYXJhbXMpID0+IHtcbiAgICAgICAgcmV0dXJuIFRoZW1lLmdldENvbXBvbmVudCh0aGlzLm5hbWUsIHBhcmFtcyk7XG4gICAgfTtcblxuICAgIGdldERpcmVjdGl2ZVRoZW1lID0gKHBhcmFtcykgPT4ge1xuICAgICAgICByZXR1cm4gVGhlbWUuZ2V0RGlyZWN0aXZlKHRoaXMubmFtZSwgcGFyYW1zKTtcbiAgICB9O1xuXG4gICAgZ2V0UHJlc2V0VGhlbWUgPSAocHJlc2V0LCBzZWxlY3RvciwgcGFyYW1zKSA9PiB7XG4gICAgICAgIHJldHVybiBUaGVtZS5nZXRDdXN0b21QcmVzZXQodGhpcy5uYW1lLCBwcmVzZXQsIHNlbGVjdG9yLCBwYXJhbXMpO1xuICAgIH07XG5cbiAgICBnZXRMYXllck9yZGVyVGhlbWVDU1MgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBUaGVtZS5nZXRMYXllck9yZGVyQ1NTKHRoaXMubmFtZSk7XG4gICAgfTtcblxuICAgIGdldFN0eWxlU2hlZXQgPSAoZXh0ZW5kZWRDU1MgPSAnJywgcHJvcHMgPSB7fSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5jc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IF9jc3MgPSByZXNvbHZlKHRoaXMuY3NzLCB7IGR0IH0pO1xuICAgICAgICAgICAgY29uc3QgX3N0eWxlID0gbWluaWZ5Q1NTKGAke19jc3N9JHtleHRlbmRlZENTU31gKTtcbiAgICAgICAgICAgIGNvbnN0IF9wcm9wcyA9IE9iamVjdC5lbnRyaWVzKHByb3BzKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgW2ssIHZdKSA9PiBhY2MucHVzaChgJHtrfT1cIiR7dn1cImApICYmIGFjYywgW10pXG4gICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcblxuICAgICAgICAgICAgcmV0dXJuIGA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCIgZGF0YS1wcmltZW5nLXN0eWxlLWlkPVwiJHt0aGlzLm5hbWV9XCIgJHtfcHJvcHN9PiR7X3N0eWxlfTwvc3R5bGU+YDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAnJztcbiAgICB9O1xuXG4gICAgZ2V0Q29tbW9uVGhlbWVTdHlsZVNoZWV0ID0gKHBhcmFtcywgcHJvcHMgPSB7fSkgPT4ge1xuICAgICAgICByZXR1cm4gVGhlbWUuZ2V0Q29tbW9uU3R5bGVTaGVldCh0aGlzLm5hbWUsIHBhcmFtcywgcHJvcHMpO1xuICAgIH07XG5cbiAgICBnZXRUaGVtZVN0eWxlU2hlZXQgPSAocGFyYW1zLCBwcm9wcyA9IHt9KSA9PiB7XG4gICAgICAgIGxldCBjc3MgPSBbVGhlbWUuZ2V0U3R5bGVTaGVldCh0aGlzLm5hbWUsIHBhcmFtcywgcHJvcHMpXTtcblxuICAgICAgICBpZiAodGhpcy50aGVtZSkge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMubmFtZSA9PT0gJ2Jhc2UnID8gJ2dsb2JhbC1zdHlsZScgOiBgJHt0aGlzLm5hbWV9LXN0eWxlYDtcbiAgICAgICAgICAgIGNvbnN0IF9jc3MgPSByZXNvbHZlKHRoaXMudGhlbWUsIHsgZHQgfSk7XG4gICAgICAgICAgICBjb25zdCBfc3R5bGUgPSBtaW5pZnlDU1MoVGhlbWUudHJhbnNmb3JtQ1NTKG5hbWUsIF9jc3MpKTtcbiAgICAgICAgICAgIGNvbnN0IF9wcm9wcyA9IE9iamVjdC5lbnRyaWVzKHByb3BzKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgW2ssIHZdKSA9PiBhY2MucHVzaChgJHtrfT1cIiR7dn1cImApICYmIGFjYywgW10pXG4gICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcblxuICAgICAgICAgICAgY3NzLnB1c2goYDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIiBkYXRhLXByaW1lbmctc3R5bGUtaWQ9XCIke25hbWV9XCIgJHtfcHJvcHN9PiR7X3N0eWxlfTwvc3R5bGU+YCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY3NzLmpvaW4oJycpO1xuICAgIH07XG59XG4iXX0=